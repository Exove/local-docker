name: Test build and init with docker-sync

on: 
  pull_request:
    branches: 
    - master

jobs:
  build:

    runs-on: macOS-10.14

    steps:
    - uses: actions/checkout@v1
    - name: Run a one-line script
      if: github.event_name == 'pull_request'
      run: echo This event is a pull request. Test build ./ld init.
    - name: Install homebrew
      run: /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
    - name: Install docker-compose
      run: |
        brew cask install docker
        docker-compose --version
    - name: Install docker-sync
      run: |
        gem install docker-sync
        docker-sync

    - name: List what is in the project folder.
      run: ls -lha

    - name: Check the type of ld
      run: file ld

    - name: Run init and see where it gets us
      run: ./ld init

